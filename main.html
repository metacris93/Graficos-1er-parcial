<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Proyecto de Gr&aacute;ficos por Computadora 1</title>
  </head>
  <script src="js/jquery-2.2.3.min.js" type="text/javascript"></script>
  <script src="js/three.min.js" type="text/javascript"></script>
  <script src="js/controls/OrbitControls.js" type="text/javascript"></script>
  <script src="js/controls/FlyControls.js"></script>
  <script src='js/libs/dat.gui.min.js'></script>
  <script src='js/libs/stats.min.js'></script>
  <script src="js/objects/ShadowMesh.js"></script>
  <script type="text/javascript" src="variables.js"></script>
  <script type="text/javascript" src="funciones.js"></script>
  <style>
      body{
          /* set margin to 0 and overflow to hidden, to go fullscreen */
          margin: 0;
          overflow: hidden;
      }
      canvas { width: 100%; height: 100% }
  </style>
  <body>
      <div id="render"></div>
      <script type="text/javascript">

      $(function (){
          renderer.setSize(window.innerWidth, window.innerHeight);
          renderer.setClearColor( 'rgb(186,228,218)' );//color de fondo
          $('#render').append(renderer.domElement);
          control_orbital = new THREE.OrbitControls(camara , renderer.domElement);
          control_orbital.addEventListener( 'change', renderizar );
          //renderer.shadowMapEnabled = true;
          crear_plano(80, 80,"");
          plano.rotation.x=-0.5*Math.PI;
          plano.position.x = 0;
          plano.position.y = -1 ;
          plano.position.z = 0;
          plano.scale.set( 0.3, 0.3, 0.3 );

	  planosimple.rotation.x=-0.5*Math.PI;
          planosimple.position.x = 0;
          planosimple.position.y = -1 ;
          planosimple.position.z = 0;
          planosimple.scale.set( 0.3, 0.3, 0.3 );
          scene.add( plano );
          scene.add(planosimple);
	// se ubica la camara en el centro de la escena
          camara.position.x = -5;//-30
          camara.position.y = 5;
          camara.position.z = 0;
          camara.lookAt(scene.position);

          //iluminacion

          FuenteDeLuz.position.set( -30, 50, - 2 );
          FuenteDeLuz.lookAt( scene.position );
	
  	  scene.add( FuenteDeLuz );
          PosicionLuz.x = FuenteDeLuz.position.x;
  	  PosicionLuz.y = FuenteDeLuz.position.y;
  	  PosicionLuz.z = FuenteDeLuz.position.z;
  	  PosicionLuz.w = 0.001; //valor debe ser cercano a cero para mejores resultados, pero no cero, x problemas de divisi√≥n para cero.

          // Fin de iluminacion
  	   agregar_cubo();

  	   agregar_cilindro();

  	   agregar_toroide();

  	   agregar_esfera();

           agregar_piramide();

          gui_widget = new dat.GUI();
          var control = gui_widget.addColor(controlador , 'color').listen();
          control.onChange(function(value){
              plano.material.color.setHex( value.replace("#", "0x") );
              planosimple.material.color.setHex( value.replace("#", "0x") );
          });

         	var toggleTablero=gui_widget.add(controlador,'Piso',["Ajedrez","Simple"]).listen();
        	toggleTablero.onChange(function(value){

        	if(value=="Simple")
        		plano.visible=false;			
        	else
        		plano.visible=true;
        	});
		
		var toggleTablero=gui_widget.add(controlador,'Luz',["On","Off"]).listen();
        	toggleTablero.onChange(function(value){

        	if(value=="On"){
        		
                        scene.add(FuenteDeLuz);
			scene.add(cylinderShadow);
			scene.add(torusShadow);
			scene.add(pyramidShadow);
			scene.add(cubeShadow);
			scene.add(sphereShadow);
                        }			
        	else
			{
			scene.remove(FuenteDeLuz);
			scene.remove(cylinderShadow);
			scene.remove(torusShadow);
			scene.remove(pyramidShadow);
			scene.remove(cubeShadow);
			scene.remove(sphereShadow);
						
			}
        		
        	});

          gui_widget.add(controlador , 'rotacionEsfera' , 0 , 4);
          gui_widget.add(controlador , 'rotacionToroide' , 0 , 4);
          gui_widget.add(controlador , 'rotacionCubo' , 0 , 4);
          gui_widget.add(controlador , 'rotacionCilindro' , 0 , 4);
          gui_widget.add(controlador , 'rotacionPiramide' , 0 , 4);
	  
	  gui_widget.add(controlador , 'traslacionEsfera' , 0 , 4);
          gui_widget.add(controlador , 'traslacionToroide' , 0 , 4);
          gui_widget.add(controlador , 'traslacionCubo' , 0 , 4);
          gui_widget.add(controlador , 'traslacionCilindro' , 0 , 4);
          gui_widget.add(controlador , 'traslacionPiramide' , 0 , 4);

          animacion();
      });

      window.addEventListener( 'resize', function () {

      camara.aspect = window.innerWidth / window.innerHeight;
      camara.updateProjectionMatrix();

      renderer.setSize( window.innerWidth, window.innerHeight );

      }, false );
      </script>
  </body>
</html>
